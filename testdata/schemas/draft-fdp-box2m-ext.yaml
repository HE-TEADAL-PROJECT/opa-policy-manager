# Copyright 2025 Matteo Brambilla - TEADAL
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

openapi: 3.0.0
servers:
- description: SwaggerHub API Auto Mocking
  url: http://localhost:1984
info:
  description: This API is an example of what a FDP could look like.
  version: 1.0.0
  title: FPD sync API Complete data
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
security:
- bearerAuth: []
paths:
  x-teadal-policies:
    description: placeholder (TODO fixme)
    policies:
    - storage_location:
        value:
        - Europe
  /:
    get:
      x-teadal-policies:
        description: placeholder (TODO fixme)
        policies:
        - call:
            value:
            - max: 1000
              unit_of_measure: call_per_month
      summary: return list of all sensor data
      operationId: getAllSensorData
      description: 'Returns all data retrived from BOX2M system in a JSON format.

        '
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                "$ref": "#/components/schemas/SensorDataList"
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      x-teadal-IAM-provider: http://baseline.teadal.ubiwhere.eu/realms/master/.well-known/openid-configuration
  schemas:
    SensorData:
      type: object
      properties:
        transactionId:
          type: string
          example: '079dcf89-1632-4377-9011-143d9f020e52'
        timestamp:
          type: date
          example: '2023-05-06T14:23:55.749Z'
        timestampLocal:
          type: date
          example: '2023-05-06T03:23:55.749Z'
        customerKey:
          type: string
          example: xf1iyhmkay
        customerName:
          type: string
          example: Teadal
        locationKey:
          type: string
          example: nuxf4c92cw
        locationName:
          type: string
          example: BOX2M Laboratory
        deviceKey:
          type: string
          example: ltwnaupx72
        deviceName:
          type: string
          example: teadal-1
        deviceVendor:
          type: string
          example: BOX2M-M0
        deviceModel:
          type: string
        circuitKey:
          type: string
          example: otib
        circuitName:
          type: string
          example: circuit-1
        parameterUsedKey:
          type: string
          example: wdvcr2rspqfkutteiy3e
        sensorVendor:
          type: string
          example: Lovato
        sensorModel:
          type: string
          example: DMG110
        channel:
          type: integer
          example: 8
        name:
          type: string
          example: Current L1
        tag:
          type: string
        raw:
          type: string
          example: 420000
        value:
          type: number
          example: 42
        unit:
          type: string
          example: A
        cost:
          type: number
        costCurrency:
          type: string
        carbon:
          type: string
      required:
      - stop_id
      - stop_name
      - stop_lat
      - stop_lon
      - transactionId
      - timestamp
      - timestampLocal
      - customerKey
      - customerName
      - locationKey
      - locationName
      - deviceKey
      - deviceName
      - deviceVendor
      - circuitKey
      - circuitName
      - parameterUsedKey
      - sensorVendor
      - sensorModel
      - channel
      - name
      - raw
      - value
      - unit
    SensorDataList:
      type: array
      items:
        "$ref": "#/components/schemas/SensorData"
